# README #


API Приложения
--------------

### Запрос

    GET /api/rate/{code}/{date}


### Параметры

* code [строка 3 заглавных символа, обязателен] - трехсимвольный код валюты
* date [дата в формате yyyy-MM-dd, строка, опционален] - дата актуальности курса

Если в запросе не указана дата актуальности курса, то такой датой считается
следующий день от текущей даты осуществления запроса.

### Ответ

```json
{
    "code": "<Код валюты>",
    "nominal": "<Номинал базовой валюты>",
    "rate": "<Курс обмена валюты>",
    "date": "<Дата актуальности>"
}
```

Ответ содержит следующие поля:

* code [строка 3 символа, обязателен] - трехсимвольный код валюты
* nominal [десятичное число, обязателен] - номинал базовой валюты
* rate [десятичное число, строка, обязателен] - курс обмена валюты
* date [дата в формате yyyy-MM-dd, строка, обязателен] - дата актуальности курса


### Примеры запросов

    GET http://example.com/currency/api/rate/USD

    GET http://example.com/currency/api/rate/USD/2015-09-24


### Пример ответа

```json
{
    "code": "USD",
    "nominal": 1,
    "rate": "66.0410",
    "date": "2015-09-24"
}
```

Сборка и запуск
---------------

Из корневой директории проекта ругайтесь в консоль:

### Сборка при помощи Gradle wrapper:
    gradlew build
Команда соберет проект в jar файл, который готов к запуску

### Запуск
    java -jar build/libs/currency-rates-1.0.jar
Запущенное приложение доступно по адресу
    http://localhost:8080/api/rate/USD/2012-11-01

Настройки
---------

На вход jar-ки можно передать дополнительные аргументы, кастомизирующие работу приложения:

*  **url** : использовать данный url-адрес ресурса ЦБ России вместо исходного

*  **cache.enabled** : производить кэширование полученных от ЦБ курсов на стороне сервера [возможные значения: true (включено), false (отключено), значение по умолчанию: false]

*  **cache.expirationTime**  : время жизни закэшированных курсов в минутах [возможные значения: целые неотрицательные числа, значение по умолчанию: 5]

*  **cache.maxSize** : максимальное количество закэшированных курсов [возможные значения: целые неотрицательные числа, значение по умолчанию: 1000]

*  **httpClientPoolSize** : размер пула соединений для конкурентных http-запросов к внешнему ресурсу [возможные значения: целые неотрицательные числа, значение по умолчанию: 50]

#### Пример запуска:
    java -jar build/libs/currency-rates-1.0.jar --cache.enabled=true --cache.expirationTime=30